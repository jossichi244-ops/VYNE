/* --- Variables --- */
$cargo-bg: rgba(20, 24, 31, 0.85);
$cargo-border: rgba(255, 255, 255, 0.05);
$cold-cyan: #00d2ff;
$alert-red: #ff4d4d;
$text-dim: #64748b;
$font-mono: "JetBrains Mono", monospace;

.cargo-monitor {
  background: $cargo-bg;
  border-radius: 12px;
  border: 1px solid $cargo-border;
  padding: 1.25rem;
  font-family: "Inter", sans-serif;

  &__header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 1.25rem;

    h5 {
      margin: 0;
      font-size: 0.75rem;
      letter-spacing: 0.15em;
      color: $text-dim;
    }

    .live-indicator {
      font-size: 0.6rem;
      color: $cold-cyan;
      font-weight: 800;
      &:before {
        content: "";
        display: inline-block;
        width: 6px;
        height: 6px;
        background: $cold-cyan;
        border-radius: 50%;
        margin-right: 6px;
        box-shadow: 0 0 8px $cold-cyan;
      }
    }

    .global-alert {
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 0.65rem;
      font-weight: 800;
      color: $alert-red;
      background: rgba($alert-red, 0.1);
      padding: 4px 8px;
      border-radius: 4px;
      animation: flash 1s infinite;
    }
  }

  &__grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
  }
}

.sensor-card {
  background: rgba(0, 0, 0, 0.2);
  border: 1px solid $cargo-border;
  border-radius: 8px;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 10px;
  position: relative;
  overflow: hidden;

  &__icon {
    font-size: 1.1rem;
    color: $text-dim;
  }

  &__data {
    label {
      display: block;
      font-size: 0.65rem;
      color: $text-dim;
      text-transform: uppercase;
      font-weight: 600;
      margin-bottom: 2px;
    }
    .value {
      font-family: $font-mono;
      font-size: 1.4rem;
      font-weight: 700;
      color: #fff;
    }
    .unit {
      font-size: 0.75rem;
      color: $text-dim;
      margin-left: 4px;
    }
  }

  /* Specific Visuals per Sensor */
  &__graph {
    height: 20px;
    position: relative;
    .wave-container {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 100%;
      background: rgba($cold-cyan, 0.05);
      border-radius: 4px;
      overflow: hidden;
    }
    .wave {
      width: 200%;
      height: 100%;
      background: linear-gradient(
        90deg,
        transparent,
        rgba($cold-cyan, 0.2),
        transparent
      );
      animation: move-wave 2s linear infinite;
    }
  }

  &__bar {
    height: 4px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 2px;
    .fill {
      height: 100%;
      background: $cold-cyan;
      box-shadow: 0 0 10px $cold-cyan;
      transition: width 0.5s ease;
    }
  }

  &__impact-dots {
    display: flex;
    gap: 4px;
    .dot {
      flex: 1;
      height: 4px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 1px;
      &.active {
        background: $alert-red;
        box-shadow: 0 0 5px $alert-red;
      }
    }
  }

  /* Alert State */
  &.is-alert {
    border-color: rgba($alert-red, 0.3);
    background: rgba($alert-red, 0.02);
    .sensor-card__icon,
    .value {
      color: $alert-red;
    }
    animation: shake 0.5s ease-in-out infinite alternate;
  }
}

/* --- Animations --- */
@keyframes move-wave {
  from {
    transform: translateX(-50%);
  }
  to {
    transform: translateX(0);
  }
}

@keyframes flash {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

@keyframes shake {
  from {
    transform: translateY(0);
  }
  to {
    transform: translateY(-2px);
  }
}
